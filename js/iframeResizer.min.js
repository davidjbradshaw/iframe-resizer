/*! iFrame Resizer (iframeSizer.min.js ) - v2.8.6 - 2015-04-30
 *  Desc: Force cross domain iframes to size to content.
 *  Requires: iframeResizer.contentWindow.min.js to be loaded into the target frame.
 *  Copyright: (c) 2015 David J. Bradshaw - dave@bradshaw.net
 *  License: MIT
 */

!function(){"use strict";function a(a,b,c){"addEventListener"in s?a.addEventListener(b,c,!1):"attachEvent"in s&&a.attachEvent("on"+b,c)}function b(){var a,b=["moz","webkit","o","ms"];for(a=0;a<b.length&&!B;a+=1)B=s[b[a]+"RequestAnimationFrame"];B||e(" RequestAnimationFrame not supported")}function c(){var a="Host page";return s.top!==s.self&&(a=s.parentIFrame?s.parentIFrame.getId():"Nested host page"),a}function d(a){return y+"["+c()+"]"+a}function e(a){v&&"object"==typeof s.console&&console.log(d(a))}function f(a){"object"==typeof s.console&&console.warn(d(a))}function g(a){function b(){function a(){k(G),i(),D[H].resizedCallback(G)}g("Height"),g("Width"),l(a,G,"resetPage")}function c(a){var b=a.id;e(" Removing iFrame: "+b),a.parentNode.removeChild(a),D[b].closedCallback(b),delete D[b],e(" --")}function d(){var a=F.substr(z).split(":");return{iframe:document.getElementById(a[0]),id:a[0],height:a[1],width:a[2],type:a[3]}}function g(a){var b=Number(D[H]["max"+a]),c=Number(D[H]["min"+a]),d=a.toLowerCase(),f=Number(G[d]);if(c>b)throw new Error("Value for min"+a+" can not be greater than max"+a);e(" Checking "+d+" is in range "+c+"-"+b),c>f&&(f=c,e(" Set "+d+" to min value")),f>b&&(f=b,e(" Set "+d+" to max value")),G[d]=""+f}function m(){var b=a.origin,c=G.iframe.src.split("/").slice(0,3).join("/");if(D[H].checkOrigin&&(e(" Checking connection is from: "+c),""+b!="null"&&b!==c))throw new Error("Unexpected message received from: "+b+" for "+G.iframe.id+". Message was: "+a.data+". This error can be disabled by adding the checkOrigin: false option.");return!0}function n(){return y===(""+F).substr(0,z)}function o(){var a=G.type in{"true":1,"false":1};return a&&e(" Ignoring init message from meta parent page"),a}function p(a){return F.substr(F.indexOf(":")+x+a)}function q(a){e(" MessageCallback passed: {iframe: "+G.iframe.id+", message: "+a+"}"),D[H].messageCallback({iframe:G.iframe,message:JSON.parse(a)}),e(" --")}function r(){return null===G.iframe?(f(" IFrame ("+G.id+") not found"),!1):!0}function t(a){var b=a.getBoundingClientRect();return h(),{x:parseInt(b.left,10)+parseInt(A.x,10),y:parseInt(b.top,10)+parseInt(A.y,10)}}function w(a){function b(){A=g,B(),e(" --")}function c(){return{x:Number(G.width)+d.x,y:Number(G.height)+d.y}}var d=a?t(G.iframe):{x:0,y:0},g=c();e(" Reposition requested from iFrame (offset x:"+d.x+" y:"+d.y+")"),s.top!==s.self?s.parentIFrame?a?parentIFrame.scrollToOffset(g.x,g.y):parentIFrame.scrollTo(G.width,G.height):f(" Unable to scroll to requested position, window.parentIFrame not found"):b()}function B(){!1!==D[H].scrollCallback(A)&&i()}function C(a){function b(a){var b=t(a);e(" Moving to in page link (#"+c+") at x: "+b.x+" y: "+b.y),A={x:b.x,y:b.y},B(),e(" --")}var c=a.split("#")[1]||"",d=decodeURIComponent(c),f=document.getElementById(d)||document.getElementsByName(d)[0];s.top!==s.self?s.parentIFrame?parentIFrame.moveToAnchor(c):e(" In page link #"+c+" not found and window.parentIFrame not found"):f?b(f):e(" In page link #"+c+" not found")}function E(){switch(G.type){case"close":c(G.iframe);break;case"message":q(p(6));break;case"scrollTo":w(!1);break;case"scrollToOffset":w(!0);break;case"inPageLink":C(p(9));break;case"reset":j(G);break;case"init":b(),D[H].initCallback(G.iframe);break;default:b()}}var F=a.data,G={},H=null;n()&&(G=d(),H=G.id,v=D[H].log,e(" Received: "+F),!o()&&r()&&m()&&(E(),u=!1))}function h(){null===A&&(A={x:void 0!==s.pageXOffset?s.pageXOffset:document.documentElement.scrollLeft,y:void 0!==s.pageYOffset?s.pageYOffset:document.documentElement.scrollTop},e(" Get page position: "+A.x+","+A.y))}function i(){null!==A&&(s.scrollTo(A.x,A.y),e(" Set page position: "+A.x+","+A.y),A=null)}function j(a){function b(){k(a),m("reset","reset",a.iframe,a.id)}e(" Size reset requested by "+("init"===a.type?"host page":"iFrame")),h(),l(b,a,"init")}function k(a){function b(b){a.iframe.style[b]=a[b]+"px",e(" IFrame ("+c+") "+b+" set to "+a[b]+"px")}var c=a.iframe.id;D[c].sizeHeight&&b("height"),D[c].sizeWidth&&b("width")}function l(a,b,c){c!==b.type&&B?(e(" Requesting animation frame"),B(a)):a()}function m(a,b,c,d){c&&c.contentWindow?(e("["+a+"] Sending msg to iframe ("+b+")"),c.contentWindow.postMessage(y+b,"*")):(f("["+a+"] IFrame not found"),D[d]&&delete D[d])}function n(b){function c(){function a(a){1/0!==D[o][a]&&0!==D[o][a]&&(n.style[a]=D[o][a]+"px",e(" Set "+a+" = "+D[o][a]+"px"))}a("maxHeight"),a("minHeight"),a("maxWidth"),a("minWidth")}function d(a){return""===a&&(n.id=a="iFrameResizer"+t++,v=(b||{}).log,e(" Added missing iframe ID: "+a+" ("+n.src+")")),a}function f(){e(" IFrame scrolling "+(D[o].scrolling?"enabled":"disabled")+" for "+o),n.style.overflow=!1===D[o].scrolling?"hidden":"auto",n.scrolling=!1===D[o].scrolling?"no":"yes"}function g(){("number"==typeof D[o].bodyMargin||"0"===D[o].bodyMargin)&&(D[o].bodyMarginV1=D[o].bodyMargin,D[o].bodyMargin=""+D[o].bodyMargin+"px")}function h(){return o+":"+D[o].bodyMarginV1+":"+D[o].sizeWidth+":"+D[o].log+":"+D[o].interval+":"+D[o].enablePublicMethods+":"+D[o].autoResize+":"+D[o].bodyMargin+":"+D[o].heightCalculationMethod+":"+D[o].bodyBackground+":"+D[o].bodyPadding+":"+D[o].tolerance+":"+D[o].enableInPageLinks+":"+D[o].resizeFrom}function i(b){a(n,"load",function(){var a=u;m("iFrame.onload",b,n),!a&&D[o].heightCalculationMethod in C&&j({iframe:n,height:0,width:0,type:"init"})}),m("init",b,n)}function k(a){if("object"!=typeof a)throw new TypeError("Options is not an object.")}function l(a){a=a||{},D[o]={},k(a);for(var b in F)F.hasOwnProperty(b)&&(D[o][b]=a.hasOwnProperty(b)?a[b]:F[b]);v=D[o].log}var n=this,o=d(n.id);l(b),f(),c(),g(),i(h())}function o(a,b){null===E&&(E=setTimeout(function(){E=null,a()},b))}function p(){o(function(){for(var a in D)"parent"===D[a].resizeFrom&&m("Window resize","resize",document.getElementById(a),a)},66)}function q(){function a(a,b){if(!a.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==a.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+a.tagName+">.");n.call(a,b)}return function(b,c){switch(typeof c){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(c||"iframe"),function(c){a(c,b)});break;case"object":a(c,b);break;default:throw new TypeError("Unexpected data type ("+typeof c+").")}}}function r(a){a.fn.iFrameResize=function(a){return this.filter("iframe").each(function(b,c){n.call(c,a)}).end()}}var s=s;"undefined"==typeof s&&(s=global);var t=0,u=!0,v=!1,w="message",x=w.length,y="[iFrameSizer]",z=y.length,A=null,B=s.requestAnimationFrame,C={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},D={},E=null,F={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enableInPageLinks:!1,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,closedCallback:function(){},initCallback:function(){},messageCallback:function(){},resizedCallback:function(){},scrollCallback:function(){return!0}};b(),a(s,"message",g),a(s,"resize",p),s.jQuery&&r(jQuery),"function"==typeof define&&define.amd?define([],q):"object"==typeof module&&"object"==typeof module.exports?module.exports=q():s.iFrameResize=q()}();
//# sourceMappingURL=iframeResizer.map