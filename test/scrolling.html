<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>QUnit LoadHide</title>
    <link rel="stylesheet" href="resources/qunit.css" />
  </head>

  <body>
    <div id="qunit"></div>
    <div id="qunit-fixture">
      <div style="width:600px;">
        <iframe
          src="resources/frame.content.html"
          width="100%"
          scrolling="no"
        ></iframe>
      </div>
    </div>
    <script src="resources/qunit.js"></script>
    <script src="resources/jquery.js"></script>
    <script src="../js/iframeResizer.min.js"></script>
    <script>
      'use strict'
      var msgId = '[iFrameSizerTest]:'

      asyncTest('scrolling not set', function() {
        $('iframe').iFrameResize({
          //log:true,
          onResized: function(messageData) {
            ok(true, 'Receive message back from iFrame.')
            ok(
              'hidden' === messageData.iframe.style.overflow,
              'iFrame overflow = ' +
                messageData.iframe.style.overflow +
                ". Expected 'hidden'."
            )
            ok(
              'no' === messageData.iframe.scrolling,
              'iFrame scrolling = ' +
                messageData.iframe.scrolling +
                ". Expected 'no'."
            )
            start()
          }
        })
      })

      asyncTest('scrolling = false', function() {
        $('iframe').iFrameResize({
          //log:true,
          scrolling: false,
          onResized: function(messageData) {
            ok(true, 'Receive message back from iFrame.')
            ok(
              'hidden' === messageData.iframe.style.overflow,
              'iFrame overflow = ' +
                messageData.iframe.style.overflow +
                ". Expected 'hidden'."
            )
            ok(
              'no' === messageData.iframe.scrolling,
              'iFrame scrolling = ' +
                messageData.iframe.scrolling +
                ". Expected 'no'."
            )
            start()
          }
        })
      })

      asyncTest('scrolling = true', function() {
        $('iframe').iFrameResize({
          //log:true,
          scrolling: true,
          onResized: function(messageData) {
            ok(true, 'Receive message back from iFrame.')
            ok(
              'auto' === messageData.iframe.style.overflow,
              'iFrame overflow = ' +
                messageData.iframe.style.overflow +
                ". Expected 'auto'."
            )
            ok(
              'yes' === messageData.iframe.scrolling,
              'iFrame scrolling = ' +
                messageData.iframe.scrolling +
                ". Expected 'yes'."
            )
            start()
          }
        })
      })

      asyncTest('scrolling = auto', function() {
        $('iframe').iFrameResize({
          //log:true,
          scrolling: 'auto',
          onResized: function(messageData) {
            ok(true, 'Receive message back from iFrame.')
            ok(
              'auto' === messageData.iframe.style.overflow,
              'iFrame overflow = ' +
                messageData.iframe.style.overflow +
                ". Expected 'auto'."
            )
            ok(
              'auto' === messageData.iframe.scrolling,
              'iFrame scrolling = ' +
                messageData.iframe.scrolling +
                ". Expected 'auto'."
            )
            start()
          }
        })
      })

      // asyncTest( "scrolling = omit", function() {
      //   $('iframe').removeAttr('scrolling');
      //   $('iframe').iFrameResize({
      //     //log:true,
      //     scrolling:'omit',
      //     onResized:function(messageData){
      //       ok( true, 'Receive message back from iFrame.' );
      //       ok( 'auto' === messageData.iframe.style.overflow, 'iFrame overflow = ' + messageData.iframe.style.overflow + '. Expected \'auto\'.' );
      //       ok( false === ('scrolling' in messageData.iframe), 'iFrame scrolling attribute exists. Expected to be omitted.' );
      //       start();
      //     }
      //   });
      // });
    </script>
  </body>
</html>
